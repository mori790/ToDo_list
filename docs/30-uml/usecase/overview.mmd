%% docs/30-uml/usecase/overview.mmd
flowchart LR
  %% ===== Actors =====
  U[\"<<Actor>> User"/]
  A[\"<<Actor>> Admin"/]

  %% ===== System boundary =====
  subgraph SYS[ToDoアプリ（Next.js + FastAPI）]
    UC_Create([ユースケース: タスク追加])
    UC_Update([ユースケース: タスク編集])
    UC_Toggle([ユースケース: 完了/未完切替])
    UC_Delete([ユースケース: タスク削除])
    UC_List([ユースケース: 一覧/検索/フィルタ])

    UC_Tag([ユースケース: タグ付与/解除])
    UC_Prio([ユースケース: 優先度設定])
    UC_Due([ユースケース: 期限設定])

    UC_SignIn([ユースケース: サインイン])
    UC_SignUp([ユースケース: サインアップ])

    UC_AdminUser([ユースケース: ユーザー管理])
    UC_AdminAudit([ユースケース: 監査ログ閲覧])
  end

  %% ===== Associations (who uses what) =====
  U --> UC_SignUp
  U --> UC_SignIn
  U --> UC_Create
  U --> UC_Update
  U --> UC_Toggle
  U --> UC_Delete
  U --> UC_List
  U --> UC_Tag
  U --> UC_Prio
  U --> UC_Due

  A --> UC_AdminUser
  A --> UC_AdminAudit

  %% ===== include / extend 的な関係（擬似表現）=====
  UC_Create --- UC_Tag:::include  %% include: 追加の一部としてタグ付与を含み得る
  UC_Create --- UC_Due:::include
  UC_Create --- UC_Prio:::include

  UC_List --- UC_Tag:::rel          %% フィルタ条件として関連
  UC_List --- UC_Prio:::rel
  UC_List --- UC_Due:::rel

  %% ===== Styles =====
  classDef actor fill:#fff,stroke:#444,stroke-dasharray:3 3;
  classDef include fill:#eef,stroke:#88a,stroke-dasharray:2 4;
  classDef rel fill:#eef,stroke:#aaa,stroke-dasharray:5 3;
  class U,A actor;
